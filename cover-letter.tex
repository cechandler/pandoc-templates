\documentclass[$if(font-size)$$fontsize$$else$11pt$endif$]{letter}
\usepackage[paper=letterpaper,top=1in,left=1in,right=1in,bottom=1in]{geometry}
\usepackage{graphicx,grffile}
\newcommand{\mytilde}{\raise.17ex\hbox{$$\scriptstyle\mathtt{\sim}$$}}
\usepackage[absolute]{textpos}
\setlength{\TPHorizModule}{8.5in}
\setlength{\TPVertModule}{\TPHorizModule}
\textblockorigin{1in}{1in} % start everything near the top-left corner

\address{$for(return-address)$$return-address$$sep$\\$endfor$}

% ==================================================
% DOCUMENT BEGINS
% ==================================================

\begin{document}


$for(include-before)$
$include-before$
$endfor$

$if(letterhead)$
\begin{textblock}{0}(0,0)
$if(letterhead-scale)$\includegraphics[scale=$letterhead-scale$]{$letterhead$}
$else$\includegraphics[scale=0.13]{$letterhead$}
$endif$
\end{textblock}
$endif$

\begin{letter}{$for(address)$$address$$sep$\\$endfor$}

$if(date)$\date{$date$}$endif$

$if(opening)$\opening{$opening$}$endif$

$body$

$if(closing)$
$closing$
$endif$

$if(signature)$
$if(signature-before)$\vspace*{$signature-before$}$endif$
$if(signature-scale)$\includegraphics[scale=$signature-scale$]{$signature$}$else$\includegraphics[scale=0.20]{$signature$}$endif$
$if(signature-after)$\vspace*{$signature-after$}$endif$
$if(author)$$author$$endif$
$if(contact)$$for(contact)$$contact$$sep$\\$endfor$$endif$
$endif$

\end{letter}

$for(include-after)$
$include-after$
$endfor$

\end{document}
